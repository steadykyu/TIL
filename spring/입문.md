+ 다음의 내용은 김영한님의 스프링 입문강의를 듣고, 저만의 방식으로 정리한 자료입니다.

+ 김영한님이 주신 강의자료에 옳지 않더라도 저만의 생각을 써 넣는 방식으로 진행합니다.

+ 문서와 중복되는 내용은 많이 제거했으니, 강의자료와 함께 읽으면서 읽기.

## 프로젝트 환경설정
### 프로젝트 생성을 위한 준비물

### 스프링 부트 스타터 사이트로 이동하여, 스프링 프로젝트 생성
  + https://start.spring.io/
  + 문서 내용에 맞도록 프로젝트 선택( ADD Dependencies 에서 필요한 라이브러리 추가) 후 generate
  + Intellij를 열고 open하여 spring.io 에서 받은 디렉토리를 지정해준다.
  + Intellij 안 build.gradle를 보면 Grandle에 대한 설정 값이 나옴
    
### IntelliJ Gradle 대신에 자바 직접 실행
  + 실행 속도를 빠르게 하기 위해 작업.
      
### IntelliJ 에서 단축키를 확실하게 검색하는 법
![shortCutKey](https://user-images.githubusercontent.com/48472652/153123511-df9a43d3-851c-4fb0-a33a-c4c65c3408d3.JPG)

## 라이브러리 살펴보기
  + External Libraries 에서 확인
  + 자세한 라이브러리 내용은 문서 or 검색

### View 환경설정
  + 링크를 타고 들어가서, welcome을 검색해보면 welcome page를 만드는 원서가 나온다.
  + static 디렉토리안에 index.html을 추가해보자.
  + <body> 안의 Hello를 출력하고, home 디렉토리/hello 링크를 제작하고 그안에 hello를 쓴다.(후자는 안열림)
  + 지금은 그냥 static 한 값 자체를 넣어준 경우이다.
  
### thymeleaf 템플릿 엔진
  + HelloController 클래스를 만들고, templates 디렉토리에 hello.html을 추가한다.
  + web app에서 /hello가 들어오면 GetMapping("hello")를 확인한 후 아래 메서드를 실행시킨다.
  + return 값인 "hello"와 모델을 가지고 viewResolver 가 resourse/templates/hello.html를 찾아주고 처리한다.
  + 웹이 열린다.
  
### 빌드하고 실행하기
https://violetboralee.medium.com/intellij-idea%EC%99%80-git-bash-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0-63e8216aa7de
  + git bash로 terminal를 사용하도록, 변경함.
  + cd .. : 상위 디렉토리 가기(그냥 cd 하면 홈디렉터리로 온다.)
  + ./gradlew clean : gradle 지우면서 디렉토리내의 bulid 폴더가 사라짐
  + ls -arlth : -arlth는 모든 파일, 폴더를 시간 역순으로 출력
  
## 스프링 웹 개발 기초
  + 정적 컨텐츠 : 파일 그자체를 고객에게 주는것(html)

  + MVC : model, view, controller 패턴으로 서버에서 제공하는 동적 컨텐츠 이다.

  + API : 서버와 클라의 약속으로 요즘은 IOS나 안드로이드 개발자와 협업을 할때, api로 json으로 파일을 주면 
  앞의 개발자들이 데이터나 파일을 받고 화면을 만든다.
  
### 정적 컨텐츠
  + 스프링 컨테이너안 hello-static 관련 컨트롤러가 없을때, 찾아서 html 값 그대로를 출력시킨다.
  
### MVC와 템플릿 엔진
  + View : 화면그리는데 모든 역량을 집중
  + M, C : 비즈니스 로직이나, 내부적 처리에 집중
  + helloMvc 메서드 생성. hello-template.html 생성
  + ctrl + p : 파라미터 정보 옵션을 준다.(helloMvc메서드에서 @RequestParam에서 써보기)
    boolean option 에서 default가 required() = true이면 값을 꼭 넘겨주어야 한다는 의미이다.
  + Model attributevalue에 변수값을 넣어줌으로써, 동적인 web이 만들어진다.
  + html에서 th: 는 thymeleaf engine / hello! empty는 껍데기 값이다.
  + ${name} 은 Model key값중 name을 찾고, 그 안의 value를 꺼내오라는 의미이다.
  + http://localhost:8080/hello-mvc?name=spring 처럼 ? 이후에 파라미터 값을 넣어줄 수 있다.

### API
  #### @ResponseBody 문자 반환
  + viewResolver를 사용하지 않고, 문자내용을 직접반환.
  + template을 만들지 않고 출력해버린 모습
  #### @ResponseBody 객체 반환
  + template을 만들지 않고 출력해버린 모습
  + ctrl + shift + enter 코드자동완성
  + alt + insert : generate ex) getter,setter, constructor 등등
  + 참고 : xml이 많이 쓰이다가, 현재는 json 방식으로 통일이 되었다.
  + spring은 객체 리턴시 default로 json 리턴방식을 따른다.
  + 추가 공부 : Json
  
## 회원 관리 예제 - 백엔드개발
  ### 비즈니스 요구사항 정리
  
  ### 회원 도메인과 리포지토리 만들기
  #### 회원객체
  #### 회원 리포지토리 인터페이스
  #### 회원 리포지토리 메모리 구현체
  + Optional<>: 매개변수가 null로 올때, optional이 감싸서 처리해준다.
  + alt + enter : option enter로  option에 뜬 내용을 확인가능
  + sequence는 0,1,2 같은 key값을 생성을 위해 입력.
  + 추가공부 : 동시성문제..? 
  + Optional.ofNullable : null이 들어오면 optional로 감싸서 출력함
  + .filter(람다식)
  + .findAny();  하나라도 찾으면 리턴 / 끝까지 돌려도 없으면, optional에 null이 포함된 채로 리턴
  + 잘 구현되고 있는지 확인을 위해 TestCase를 작성해야한다.
  + 개인적인 추가공부 : stream()
  
  ### 회원 리포지토리 테스트 케이스 작성
  #### 회원 리포지토리 메모리 구현체 테스트
  + 내가 새로 만든객체에서 이름을 정해준 것을 repository에 넣고
  + repository에서 찾아내온 값이 일치하면 무사히 테스트 통과일 것이다!
  + Junit의 Assertion 또는 assertj의 Assertion으로 비교가능. 가독성 때문에 후자를 더 선호.
  + shift + f6 : 모든 변수 rename
  + 테스트 case들을 전체 다 돌리면 랜덤한 순서대로 실행된다.
  + 만약 findByName 에서 'spring'라는 회원을 넣고 save에도 'spring' 회원을 넣는 상황이라면 이미 값이 repository    에 존재하여 오류가 발생한다. 즉 메서드들이 순서에 의존하게 된다. 이런 테스트케이스는 좋은 테스트 케이스가 아니다.    독립적으로 실행될 수 있도록 설계해야한다.
  
  ### 회원 서비스 개발
  + validateDuplicateMember 메서드안의 memberRepository.findByName(member.getName()) 는 optional을 리턴한다.
  + 그러므로 Optional 참조변수를 굳이 만들지 않고 한번에 ifPresent()작업을 하여 클린코드를 만들 수 있다.
  + ctrl + alt + v : (커서가 있는 메서드의 리턴값)변수 추출하기.
  + ctrl + alt + shift+ t : 리팩토링 관련 옵션들(Rename, inline, extract 등등 다양함!)
  + ctrl + alt + m : 메서드 추출하기
  + service는 비즈니스에 조금더 의존해서 코드를 만드는 느낌이 있다.
  + 그에 반해 repository는 좀 더 개발적으로 매끄럽게 만든다.
  
  ### 회원 서비스 테스트
  + ctrl + shift + T : main()의 클래스위에 커서를 두고 누를시, 바로 패키지와 test class의 뼈대를 만들어 준다.
  + Test의 메서드명은 한글로 적어도 상관없다. 어차피 빌드나 최종 코딩에 포함되지 않기 때문이다.
  + Test는 given/when/then 패턴으로 구성하면 왠만해서는 끝낼 수 있다.
  + 리포지토리테스트와 마찬가지로 repository에 같은 값으로 인한 충돌을 막기 위해 @AfterEach 안에 clearStore()를       실행시킨다.
  + (beforeEach) 쓰기 전 상태 
    기존에는 회원 서비스와 서비스테스트 클래스들이 직접 메모리 회원 리포지토리를 생성하게 했다.
    1. MemberService의 repository와 MemberServiceTest의 repository가 지금 다른 인스턴스로 만들어 질 것이다.
    2. 지금은 static한 repository라 문제는 없다. 그러나 만약 static 하지 않으면 두개가 서로 다른 db를 생성한다.
      (실제 클래스와 Test의 DB가 다르게 되는것이다)
  + 같은 인스턴스를 쓰게 하기 위해 회원 리포지토리의 코드가 회원 서비스 코드를 DI 가능하게 변경한다.
      (생성자 DI - MemberService의 생성자를 이용해 같은 DB를 의미하도록 설정하였다.)
  
## 스프링 빈과 의존관계
  ### 컴포넌트 스캔과 자동 의존관계 설정
  ### 자바 코드로 직접 스프링 빈 등록하기
  
  
